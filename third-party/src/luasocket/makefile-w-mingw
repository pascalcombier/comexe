.PHONY: all clean

all: bin\libluasocket.a

bin\auxiliar.o: src\auxiliar.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\auxiliar.c -o bin\auxiliar.o

bin\buffer.o: src\buffer.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\buffer.c -o bin\buffer.o

bin\compat.o: src\compat.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\compat.c -o bin\compat.o

bin\except.o: src\except.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\except.c -o bin\except.o

bin\inet.o: src\inet.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\inet.c -o bin\inet.o

bin\io.o: src\io.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\io.c -o bin\io.o

bin\luasocket.o: src\luasocket.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\luasocket.c -o bin\luasocket.o

bin\mime.o: src\mime.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\mime.c -o bin\mime.o

bin\options.o: src\options.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\options.c -o bin\options.o

bin\select.o: src\select.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\select.c -o bin\select.o

bin\tcp.o: src\tcp.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\tcp.c -o bin\tcp.o

bin\timeout.o: src\timeout.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\timeout.c -o bin\timeout.o

bin\udp.o: src\udp.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\udp.c -o bin\udp.o

bin\wsocket.o: src\wsocket.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -Wno-unused-parameter -I..\lua\src -fdiagnostics-color=never -c src\wsocket.c -o bin\wsocket.o

bin\libluasocket.a: bin\auxiliar.o bin\buffer.o bin\compat.o bin\except.o bin\inet.o bin\io.o bin\luasocket.o bin\mime.o bin\options.o bin\select.o bin\tcp.o bin\timeout.o bin\udp.o bin\wsocket.o
	ar rcs $@ $^

clean:
	del /F /Q 2>NUL bin\auxiliar.o bin\buffer.o bin\compat.o bin\except.o bin\inet.o bin\io.o bin\luasocket.o bin\mime.o bin\options.o bin\select.o bin\tcp.o bin\timeout.o bin\udp.o bin\wsocket.o bin\libluasocket.a
