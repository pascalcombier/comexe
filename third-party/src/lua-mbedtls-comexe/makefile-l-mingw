.PHONY: all clean

all: bin/libluambedtls.a

bin/base64.o: src/base64.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -DMBEDTLS_DECLARE_PRIVATE_IDENTIFIERS -I../lua/src -I../mbedtls/include -I../mbedtls/src/tf-psa-crypto/include -I../mbedtls/src/tf-psa-crypto/drivers/builtin/include -c src/base64.c -o bin/base64.o

bin/main.o: src/main.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -DMBEDTLS_DECLARE_PRIVATE_IDENTIFIERS -I../lua/src -I../mbedtls/include -I../mbedtls/src/tf-psa-crypto/include -I../mbedtls/src/tf-psa-crypto/drivers/builtin/include -c src/main.c -o bin/main.o

bin/md.o: src/md.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -DMBEDTLS_DECLARE_PRIVATE_IDENTIFIERS -I../lua/src -I../mbedtls/include -I../mbedtls/src/tf-psa-crypto/include -I../mbedtls/src/tf-psa-crypto/drivers/builtin/include -c src/md.c -o bin/md.o

bin/ssl.o: src/ssl.c
	$(CC) -ggdb -fvisibility=hidden --std=c99 -Wall -Wextra -Os -DMBEDTLS_DECLARE_PRIVATE_IDENTIFIERS -I../lua/src -I../mbedtls/include -I../mbedtls/src/tf-psa-crypto/include -I../mbedtls/src/tf-psa-crypto/drivers/builtin/include -c src/ssl.c -o bin/ssl.o

bin/libluambedtls.a: bin/base64.o bin/main.o bin/md.o bin/ssl.o
	ar rcs $@ $^

clean:
	rm -f bin/base64.o bin/main.o bin/md.o bin/ssl.o bin/libluambedtls.a
